var tdwFiltersList={};
(function(){tdwFiltersList={items:[],init:function(){tdwFiltersList.items=[]},item:function(){this.loadType=this.jqueryObj=this.blockUid=void 0;this.sampleData=!1;this.closeIcon="";this._is_initialized=this.inComposer=!1},_initialize_item:function(b){!0!==b._is_initialized&&!0!==b.inComposer&&!0!==b.sampleData&&(b.jqueryObj.on("click",".remove",function(a){a.preventDefault();a.stopPropagation();a=jQuery(this).parent().data("tax");var c=jQuery(this).parent().data("term-slug");jQuery(this).parents("li").hide();
jQuery(document).trigger("td_woo_filter_remove",{tax:a,term:c});var e=tdwFiltersList.removeQueryParam(window.location.href,"product-page");if("ajax"===tdwFiltersList.getItemObjById(b.blockUid).loadType)for(window.history.pushState({},"",tdwFiltersList.updateQuery(e,a,c)),a=0;a<tdwFilter.items.length;a++)tdwFilter.items[a].jqueryObj.trigger("td_woo_filters_block_update",["td_woo_filter_remove",{}]),jQuery(document).trigger("td_woo_filters_ajax_block_update",["td_woo_filter_remove",{tdwFilterItemBlockAtts:tdwFilter.items[a].blockAtts}]);
else window.location.href=tdwFiltersList.updateQuery(e,a,c)}),jQuery(document).on("td_woo_filter_add",function(a,c){a=c.tax;var e=c.term;c=c.term_name;b.jqueryObj.find(".tdw-filters-wrap ul").length||b.jqueryObj.find(".tdw-block-inner").append('<div class="tdw-filters-wrap"><ul></ul></div>');b.jqueryObj.find(".tdw-filters-wrap ul").append('<li><a href="#" data-tax="'+a+'" data-term-slug="'+e+'" data-term-name="'+c+'"><span class="remove">'+c+b.closeIcon+"</span></a></li>")}),jQuery(document).on("td_woo_filter_change",
function(a,c){a=c.tax;var e=c.term;c=c.term_name;var d=b.jqueryObj.find('[data-tax="'+a+'"]');d.length?void 0===c?d.parent("li").remove():d.replaceWith('<a href="#" data-tax="'+a+'" data-term-slug="'+e+'" data-term-name="'+c+'"><span class="remove">'+c+b.closeIcon+"</span></a>"):b.jqueryObj.find(".tdw-filters-wrap ul").append('<li><a href="#" data-tax="'+a+'" data-term-slug="'+e+'" data-term-name="'+c+'"><span class="remove">'+c+b.closeIcon+"</span></a></li>")}),jQuery(document).on("td_woo_filter_clear_all",
function(){b.jqueryObj.find(".tdw-filters-wrap ul").empty()}),jQuery(document).on("td_woo_filters_ajax_block_update",function(a,c,e){var d=new URLSearchParams(window.location.search),f=b.jqueryObj.find(".tdw-filters-wrap");"on_popstate_reload"===c&&(f.find("ul > li").each(function(){var a=jQuery(this),b=a.find("a").data("tax"),c=a.find("a").data("term-slug");d.has(b)?-1===d.get(b).indexOf(c)&&a.remove():a.remove()}),"undefined"!==e.tdw_filters&&e.tdw_filters.forEach(function(a){var c=f.find('[data-term-slug="'+
a.slug+'"]');c.length?c.parents("li").is(":hidden")&&c.parents("li").show():f.find("ul").append('<li><a href="" data-tax="'+a.tax+'" data-term-slug="'+a.slug+'" data-term-name="'+a.name+'"><span class="remove">'+a.name+b.closeIcon+"</span></a></li>")}))}),window.onpopstate=function(a){if(null!==a.state)if("ajax"===b.loadType){var c=[];(new URLSearchParams(window.location.search)).forEach(function(a,d){-1!==d.indexOf("tdw_")&&jQuery(a.split(",")).each(function(a,e){a=b.jqueryObj.find('[data-term-slug="'+
e+'"]');a.length&&c.push({tax:d,slug:e,name:a.data("term-name")})})});jQuery(document).trigger("td_woo_filters_ajax_block_update",["on_popstate_reload",{tdw_filters:c}]);b.jqueryObj.trigger("td_woo_filters_block_update",["on_popstate_reload",c])}else window.location.reload()},b._is_initialized=!0)},addItem:function(b){if("undefined"===typeof b.blockUid)throw"item.blockUid is not defined";tdwFiltersList.items.push(b);tdwFiltersList._initialize_item(b)},deleteItem:function(b){for(var a=0;a<tdwFiltersList.items.length;a++)if(tdwFiltersList.items[a].blockUid===
b)return tdwFiltersList.items.splice(a,1),!0;return!1},updateQuery:function(b,a,c){var e=new RegExp("([?&])"+a+"=.*?(&|$)","i"),d=(new URLSearchParams(window.location.search)).get(a),f="";if(-1!==d.indexOf(",")){d=d.split(",");for(var g=0;g<d.length;g++)d[g]!==c&&(f+=d[g]+",");f=f.replace(/,\s*$/,"");return b.replace(e,"$1"+a+"="+f+"$2")}return b.replace(e,"$1").replace(/[&|?]\s*$/,"")},removeQueryParam:function(b,a){return b.replace(new RegExp("([?&])"+a+"=.*?(&|$)","i"),"$1").replace(/[&|?]\s*$/,
"")},getItemIndex:function(b){var a=0,c=0;jQuery.each(tdwFiltersList.items,function(e,d){if(d.blockUid===b)return c=a,!1;a++});return c},getItemObjById:function(b){return tdwFiltersList.items[tdwFiltersList.getItemIndex(b)]}}})();jQuery().ready(function(){tdwFiltersList.init()});
